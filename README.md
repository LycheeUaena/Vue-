# Vue 2.0 + 3.0

#### 初识 Vue

​    1. 想让 Vue 工作，就必须创建一个 Vue 实例，且要传入一个配置对象；

​    2. root 容器里的代码依然符合 html 规范，只不过混入了一些特殊的 Vue 语法；

​    3. root 容器里的代码被称为【Vue 模板】；

​    4. Vue 实例和容器是一一对应的；

​    5. 真实开发中只有一个 Vue 实例，并且会配合着组件一起使用；

​    6. {{xxx}} 中的 xxx 要写 js 表达式，且 xxx 可以自动读取到 data 中的所有属性；

​    7. 一旦 data 中的数据发生改变，那么木板中用到该数据的地方也会自动更新；

​    

​    注意区分：js 表达式和 js 代码（语句）

​      1. 表达式：一个表达式会生成一个值，可以放在任何一个需要值的地方：

​        （1） a

​        （2） a+b

​        （3） demo(1)

​        （4） x === y ? 'a' : 'b'



​      2. js代码（语句）

​        （1） if(){}

​        （2） for(){}



#### Vue模板语法

Vue 模板语法有两大类：

​      1. 插值语法：

​        功能：用于解析标签体内容。

​        写法：{{xxx}}，xxx 是 js 表达式，且可以直接读取到 data 中的所有属性。

​      2. 指令语法：

​        功能：用于解析标签（包括：标签属性、标签体内容、绑定时间......）。

​        举例：v-bind:href="xxx" 或简写为 :href="xxx"。xxx 同样要写 js 表达式且可以直接读取到 data 中的所有属性

​        备注：Vue 中有很多的指令，且形式都是：v-????。此处我们只是拿v-vbind举个例子。*



#### 数据绑定

Vue 中有 2 种数据绑定的方式：

​      1. 单向绑定（v-bind）：数据只能从data流向页面

​      2. 双向绑定（v-vmodel）：数据不仅能从data流向页面，还可以从页面流向 data

​        备注：

​          1. 双向绑定一般应用在表单类元素上（如：input、select 等）

​          2. v-vmodel:valie 可以简写为 v-vmodel，因为 v-vmodel 默认收集的就是 value 值*



#### el与data的两种写法

data 与 el 的两种写法：

     1. el 有两种写法：
              1. new Vue 时配置 el 属性
              2. 先创建 Vue 实例，随后通过 vm.$mount('#root') 指定 el 的值
    
          2. data 有两种写法
              1. 对象式
              2. 函数式

​		如何选择：目前哪种写法都可以，以后学习到组件时，data 必须使用函数式，否则会报错

​      3. 一个重要的原则：

​        由 Vue 管理的函数，一定不要写箭头函数，一旦写了箭头函数，this 就不再是 Vue 实例了



#### MVVM模型

MVVM 模型

​    1. M：模型(Model)：data 中的数据

​    2. V：视图(View)：模板代码

​    3. VM：视图模型(ViewModel)：Vue 实例

  观察发现：

1. data 中所有属性，最后都出现在了 vm 身上
1. vm 身上所有的属性 及 Vue 原型上所有属性，在 Vue 模板中都可以直接使用



#### 数据代理

1. Vue 中的数据代理：

​      通过 vm 对象来代理 data 对象中属性的操作（读/写）

2. Vue 中数据代理的好处：

​      更加方便地操作 data 中的数据

3. 基本原理：

​      通过 Object.defineProperty() 把 data 对象中所有属性添加到 vm 上

​      为每一个添加到 vm 上的属性，都指定一个 getter/setter

​      在 getter/setter 内部去操作（读/写） data 中对应的属性

#### key 的原理

**面试题：react、vue 中的 key 有什么作用？（key 的内部原理）**

1. 虚拟 DOM 中 key 的作用：

​      key 是 虚拟 DOM 对象的标识，当状态中的数据发生变化时，Vue 会根据【新数据】生成【新的虚拟 DOM】，

​      随后 Vue 进行【新虚拟 DOM】与【旧虚拟 DOM】的差异比较，比较规则如下：

    2. 对比规则：
       1. 旧虚拟dom中找到了与新虚拟dom相同的key：


​				若虚拟dom中内容没变，直接使用之前的真实dom

​        		若虚拟dom中内容变了，则生成新的真实dom，随后替换掉页面中之前的真实dom

​		  2. 旧虚拟dom中未找到与新虚拟dom相同的key

​        		创建新的真实dom，随后渲染到页面

   3. 用 index 作为 key 可能会引发的问题：

      1. 若对数据进行：逆序添加、逆序删除等破坏顺序操作：

         ​	会产生没必要的真实 dom 更新 ==> 界面效果没问题，单效率低

      2. 如果结构中还包含输入类的 DOM：

         ​	会产生错误 DOM 更新 ==> 界面有问题

   4. 开发中如何选择 key?

        1. 最好使用每条数据的唯一标识作为 key，比如 id、手机号、身份证号、学号等唯一值
        2. 如果不存在对数据的逆序添加、逆序删除等破坏顺序操作，仅用于渲染列表用于展示，使用 index 作为 key 是没有问题的

